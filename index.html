<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <title>고객 상담일지 기록시스템</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">

  <?!= include('Style'); ?>
</head>

<body data-view="<?= view ?>" data-is-dual-mode="false" data-script-url="<?= scriptUrl ?>">
  
  <div id="loader" class="modal-overlay hidden"><div style="color:white; text-align:center;"><div style="border:4px solid #f3f3f3; border-top:4px solid #3498db; border-radius:50%; width:40px; height:40px; animation:spin 1s linear infinite; margin:0 auto 10px;"></div><p>처리 중...</p></div></div>
  
  <div id="loginModal" class="modal-overlay hidden" style="z-index: 200000; background-color: #fff;">
    <div class="modal-content" style="text-align: center;">
      <h2>로그인 필요</h2><button id="googleLoginBtn" style="width:100%; padding:12px;">Google 계정으로 로그인</button>
    </div>
  </div>

  <div id="addCustomerModal" class="modal-overlay hidden">
    <div class="modal-content">
      <h2>신규 고객 추가</h2>
      <div class="form-group"><label>디비 유형:</label><select id="newDbType"></select></div>
      
      <div class="form-group"><label>유입경로:</label><select id="newLeadSource"><option value=""></option></select></div>
      
      <div class="form-group"><label>고객명:</label><input type="text" id="newCustomerName"></div>
      <div class="form-group"><label>전화번호:</label><input type="tel" id="newCustomerPhoneNumber"></div>
      <div class="modal-actions" style="display:flex; justify-content:flex-end; gap:10px; margin-top:20px;">
        <button id="cancelAddCustomerBtn" class="secondary">취소</button><button id="saveNewCustomerBtn">저장</button>
      </div>
    </div>
  </div>
  
  <div class="container">
    <div class="tab-container">
      <button id="tabCustomerBtn" class="modern-tab active">📋 고객 관리</button>
      <button id="tabContractBtn" class="modern-tab">📑 계약 관리</button>
    </div>

    <div class="list-panel" id="listPanel">
      <div class="list-left-pane">
        <div class="filter-panel">
          <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
            <h3 style="margin:0; font-size:1rem;">검색 및 필터</h3>
            <button id="resetFilterBtn" class="secondary" style="padding:4px 8px; font-size:0.8rem;">초기화</button>
          </div>
          <div class="form-group">
            <label>통합 검색:</label>
            <div class="search-bar-group"><input type="text" id="filterSearchTerm" placeholder="이름/번호/차종/메모..."><button id="applyFilterBtn">검색</button></div>
          </div>
          <hr style="border:0; border-top:1px dashed #ddd; margin:15px 0;">
          <div class="filter-grid">
            <div class="form-group admin-only hidden" style="background-color: #ffeef0; padding: 2px; border-radius: 4px;">
              <label style="color: #d63384; font-weight:bold;">담당자 선택 (Admin):</label>
              <select id="filterManager">
                <option value="">전체 담당자 보기</option>
              </select>
            </div>
            <div class="form-group"><label>디비 유형:</label><select id="filterDbType"><option value="">전체</option></select></div>
            <div class="form-group"><label>유입경로:</label><select id="filterLeadSource"><option value="">전체</option></select></div>
            
            <div class="form-group full-width"><label>진행 상태:</label><select id="filterCustomerStatus"><option value="">전체</option></select></div>
            
            <div class="form-group"><label>배정일(시작):</label><input type="date" id="filterAssignmentDateFrom"></div>
            <div class="form-group"><label>배정일(끝):</label><input type="date" id="filterAssignmentDateTo"></div>
            <div class="form-group"><label>상담일(시작):</label><input type="date" id="filterLastLogDateFrom"></div>
            <div class="form-group"><label>상담일(끝):</label><input type="date" id="filterLastLogDateTo"></div>
          </div>
        </div>
        <div id="todoListPanel" style="flex:1; border-top:1px solid #ddd; padding:15px; background:#fff;">
          <h3 style="font-size:0.95rem; color:#555; margin-bottom:10px;">📌 상담 전 (To-Do)</h3>
          <ul id="todoCustomersList" style="padding-left:20px; color:#777; font-size:0.9rem;"><li>(기능 준비중)</li></ul>

          <div style="margin-top:15px; padding-top:10px; border-top:1px dashed #eee;">
          <button id="logoutBtn" class="secondary" style="padding:6px 10px; font-size:0.8rem; background-color: #f8f9fa; border: 1px solid #ccc; color: #555;">
            🚪 로그아웃
          </button>
        </div>
        </div>
      </div>
      <div class="list-right-pane">
        <div class="list-header">
          <h2 style="font-size:1.1rem; margin:0;">내 고객 목록</h2>
          <div style="display:flex; gap:10px; align-items:center;">
              <button id="openAddCustomerModalBtn" style="padding:6px 10px; font-size:0.8rem;">+ 신규 등록</button>
          </div>
        </div>
        <div class="list-header-row">
          <span class="col-manager hidden admin-only">담당자</span>
          <span class="col-status">진행 상태</span>
          <span class="col-db">DB유형</span>
          <span class="col-source">유입경로</span>
          <span class="col-name">고객명</span>
          <span class="col-phone">연락처</span>
          <span class="col-memo">메모/관심차종</span>
          
          <span class="col-last" id="sortLastLogBtn" style="cursor:pointer; user-select:none;">
            최근상담 <span id="sortIconLastLog">▼</span>
          </span>
          <span class="col-date" id="sortAssignmentDateBtn" style="cursor:pointer; user-select:none;">
            배정일 <span id="sortIconAssignmentDate"></span>
          </span>
        </div>
        <ul id="assignedCustomersList" style="flex:1; overflow-y:auto; margin:0; padding:0; list-style:none;">
           <li style="padding:20px; text-align:center; color:#999;">로딩 중...</li>
        </ul>
        <div style="padding:8px; text-align:center; border-top:1px solid #eee;"><button id="loadMoreBtn" class="secondary hidden">더보기</button></div>
      </div>
    </div>

    <div class="list-panel hidden" id="contractListPanel">
      <div class="list-left-pane">
        <div class="filter-panel">
          <h3 style="margin-bottom:15px; font-size:1rem;">계약 검색</h3>
          <div class="form-group">
             <label>통합 검색:</label>
             <div class="search-bar-group"><input type="text" id="contractSearchTerm" placeholder="차종/고객명..."><button id="searchContractBtn">검색</button></div>
          </div>
          <hr style="border:0; border-top:1px dashed #ddd; margin:15px 0;">
          <div class="form-group"><label>계약 상태:</label><select id="filterContractStatus"><option value="">전체</option><option value="진행중">진행중</option><option value="계약 완료">계약 완료</option><option value="출고 완료">출고 완료</option><option value="취소/해지">취소/해지</option></select></div>
          <div class="form-group full-width"><label>계약접수처:</label><select id="filterContractReceiptSource"><option value="">전체</option></select></div>
          <div class="form-group full-width"><label>유입경로:</label><select id="filterContractLeadSource"><option value="">전체</option></select></div>
          <div class="form-group"><label>계약일(시작):</label><input type="date" id="filterContractDateFrom"></div>
        </div>
      </div>
      
      <div class="list-right-pane">
         <div class="list-header">
             <h2 style="font-size:1.1rem; margin:0;">전체 계약 목록</h2>
             <button id="openAddContractPageFromListBtn" disabled style="padding:6px 12px; font-size:0.8rem; background-color:#ccc; cursor:not-allowed;">+ 계약 추가 (점검중)</button>
         </div>
         <div class="list-header-row">
          <span class="col-manager hidden admin-only">담당자</span>
           <span class="col-cont-status">상태</span>
           <span class="col-cont-date">계약일</span>
           <span class="col-cont-term">개월</span>
           <span class="col-cont-cust">고객명</span>
           <span class="col-cont-car">계약 차종</span>
           <span class="col-cont-receipt">계약접수처</span>
           <span class="col-cont-source">유입경로</span>
           <span class="col-cont-db">DB유형</span>
         </div>
         <div id="globalContractList" style="flex:1; overflow-y:auto;"></div>
      </div>
    </div>

    <div class="detail-panel hidden" id="contractDetailPanel" style="display:block; overflow-y:auto; background-color:#f4f6f9;">
      <div class="contract-detail-container">
        <a href="#" id="dynamicBackBtn" class="back-link">&larr; 돌아가기</a>
        <div style="background: white; border-radius: 8px; padding: 30px; box-shadow: 0 4px 12px rgba(0,0,0,0.05);">
          
          <div class="contract-header">
              <h2 class="contract-title">계약 상세 정보</h2>
              <div style="display:flex; align-items:center; gap:8px;">
                  <select id="detailContractStatus" style="font-size:1rem; padding:4px 8px; font-weight:bold; color:#333; border:1px solid #ccc; border-radius:4px;">
                  </select>
                  <button id="btnUpdateContractStatus" class="secondary" style="font-size:0.85rem; padding:5px 10px; background-color:#6c757d; color:white;">상태변경</button>
              </div>
              <span id="viewContStatus" style="font-size:1.2rem; font-weight:bold; color:#555;"></span>
          </div>

            <div class="info-card-grid">
            <div class="info-card">
              <h4>📋 기본 계약 정보</h4>
              <div class="detail-row"><span class="detail-label">계약 명의자</span><span class="detail-value" id="viewContRealName"></span></div>
              <div class="detail-row"><span class="detail-label">계약 차종</span><span class="detail-value highlight-value" id="viewContCar"></span></div>
              <div class="detail-row"><span class="detail-label">상품명</span><span class="detail-value" id="viewContProductName"></span></div>
              <div class="detail-row"><span class="detail-label">계약 기간</span><span class="detail-value" id="viewContTerm"></span></div>
              <div class="detail-row"><span class="detail-label">계약일</span><span class="detail-value" id="viewContDate"></span></div>
              <div class="detail-row"><span class="detail-label">월 렌탈료</span><span class="detail-value highlight-value" id="viewContAmount"></span></div>
            </div>

              <div class="info-card">
                <h4>⚙️ 관리 및 승인 정보</h4>
                <div class="detail-row"><span class="detail-label">계약번호</span><span class="detail-value" id="viewContNumber"></span></div>
                <div class="detail-row"><span class="detail-label">승인번호</span><span class="detail-value" id="viewContApproval"></span></div>
                <div class="detail-row"><span class="detail-label">투입일자</span><span class="detail-value" id="viewContInputDate"></span></div>
                <div class="detail-row"><span class="detail-label">계약접수처</span><span class="detail-value" id="viewContReceiptSource"></span></div>
                <div class="detail-row"><span class="detail-label">유입경로</span><span class="detail-value" id="viewContLeadSource"></span></div>
                <div class="detail-row"><span class="detail-label">수수료</span><span class="detail-value" id="viewContCommission"></span></div>
              </div>
            <div class="info-card">
              <h4>🚗 차량 및 금융 상세</h4>
              <div class="detail-row"><span class="detail-label">차량가격</span><span class="detail-value" id="viewContCarPrice"></span></div>
              <div class="detail-row"><span class="detail-label">외장 / 내장</span><span class="detail-value" id="viewContColors"></span></div>
              <div class="detail-row"><span class="detail-label">보증금/선납금</span><span class="detail-value" id="viewContDeposit"></span></div>
              <div class="detail-row"><span class="detail-label">인수가(잔존)</span><span class="detail-value" id="viewContAcquisition"></span></div>
              <div class="detail-row"><span class="detail-label">약정거리</span><span class="detail-value" id="viewContMileage"></span></div>
              <div class="detail-row"><span class="detail-label">정비/위약금</span><span class="detail-value" id="viewContMaintPenalty"></span></div>
            </div>

          </div>

          <div class="info-card" style="margin-top: 20px;">
            <h4>📝 특이사항 / 메모</h4>
            <div id="viewContSummary" style="background:#f9f9f9; padding:15px; border-radius:4px; min-height:60px; white-space: pre-wrap; color:#444;"></div>
          </div>
          
          <div id="singleButtonArea">
            <button id="goToCustomerDetailBtn" class="btn-link-customer">해당 고객 상세 정보 보러가기 &rarr;</button>
          </div>

          <div id="dualButtonArea" class="hidden" style="display:flex; gap:10px; margin-top:20px;">
            <button id="goToContractorBtn" class="btn-link-customer" style="flex:1; background-color:#6c757d;">
              📑 실계약자 정보 &rarr;
            </button>
            <button id="goToConsultantBtn" class="btn-link-customer" style="flex:1;">
              👤 상담 고객 정보 &rarr;
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="detail-panel hidden" id="customerDetailPanel">
      <div class="detail-info-pane">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
           <a href="#" id="backToListBtn" class="back-link" style="margin-bottom:0;">&larr; 목록으로 돌아가기</a>
           
           <div style="display:flex; gap:10px; align-items:center;">
              <input type="file" id="voiceFileInput" accept="audio/*, video/*" style="display:none">
              <button id="btnAnalyzeVoice" style="background-color:#198754; color:white; display:flex; align-items:center; gap:5px; padding:6px 12px;">
                 <span>🎙️ AI 상담 분석</span>
              </button>
              <button id="saveCustomerDetailsBtn" style="padding:6px 12px;">정보 저장</button>
           </div>
        </div>
        
        <h2 id="detailCustomerNameText" style="margin:0; font-size:1.3rem; margin-bottom:15px;">고객 상세</h2>
        
        <div id="assignmentDetails">
            
            <div class="details-section">
                <h3>📊 상담 관리</h3>
                <div class="details-grid">
                    <div class="form-group"><label>배정일:</label><span id="detailAssignmentDate" class="read-only-box"></span></div>
                    <div class="form-group"><label>DB유형:</label><span id="detailDbType" class="read-only-box"></span></div>

                    <div class="form-group"><label>진행상태:</label><select id="customerStatus"><option value=""></option></select></div>
                    <div class="form-group"><label>유입경로:</label><select id="leadSource"><option value=""></option></select></div>

                    <div class="form-group"><label>견적번호:</label><input type="text" id="quoteNumber" placeholder="견적서 번호"></div>
                    <div class="form-group"><label>승인번호:</label><input type="text" id="approvalNumber" placeholder="심사 승인 번호"></div>

                    <div class="form-group span-full"><label>고객 메모:</label><input type="text" id="customerMemo" placeholder="특이사항 요약"></div>
                </div>
            </div>

            <div class="details-section">
                <h3>👤 고객 프로필</h3>
                <div class="details-grid">
                    <div class="form-group"><label>고객유형:</label><select id="customerType"><option value=""></option><option value="개인">개인</option><option value="개인사업자">개인사업자</option><option value="법인">법인</option></select></div>
                    
                    <div class="form-group"><label>성별/연령:</label>
                        <div style="display:flex; gap:5px;">
                            <select id="gender" style="flex:1;"><option value=""></option><option value="남성">남성</option><option value="여성">여성</option></select>
                            <select id="ageGroup" style="flex:1;"><option value=""></option></select>
                        </div>
                    </div>

                    <div class="form-group span-2">
                        <label>연락처:</label>
                        <div style="display:flex; gap:8px;">
                            <input type="tel" id="detailCustomerPhoneNumber" style="width: 140px;">
                            <button id="savePhoneNumberBtn" class="secondary" style="width:auto; padding:0 15px; white-space:nowrap;">수정</button>
                        </div>
                    </div>

                    <div class="form-group"><label>지역:</label><select id="addressCity"><option value=""></option></select></div>
                    <div class="form-group span-2"><label>상세주소:</label><input type="text" id="detailAddress"></div>

                    <div class="form-group"><label>직업구분:</label><select id="incomeType"><option value=""></option></select></div>
                    <div class="form-group"><label>상세직종:</label><input type="text" id="occupation"></div>
                    <div class="form-group"><label>신용등급:</label><select id="creditInfo"><option value=""></option></select></div>
                </div>
            </div>

            <div class="details-section">
                <h3>🚗 차량 및 계약 조건</h3>
                <div class="details-grid">
                    <div class="form-group span-2"><label>관심차종:</label><input type="text" id="interestedCarModel"></div>
                    <div class="form-group"><label>비교차량:</label><input type="text" id="comparisonCarModel"></div>
                    <div class="form-group"><label>현재보유:</label><input type="text" id="ownedCarModel"></div>
                    
                    <div class="form-group"><label>용도:</label><select id="carUsage"><option value=""></option></select></div>
                    <div class="form-group"><label>운전자:</label><input type="text" id="driverScope"></div>
                    <div class="form-group"><label>주행거리:</label><select id="drivingDistance"><option value=""></option></select></div>
                    
                    <div class="form-group"><label>필요시기:</label><select id="expectedContractTiming"><option value=""></option></select></div>
                    <div class="form-group"><label>계약기간:</label><select id="desiredContractTerm"><option value=""></option></select></div>
                    
                    <div class="form-group span-2">
                      <label>초기비용:</label>
                      <div style="display:flex; gap:5px;">
                          <select id="desiredInitialCostType" style="flex:1;"><option value=""></option></select>
                          <input type="text" id="initialCostDetail" placeholder="상세 내용 (예: 보증 1000 / 선납 1000)" style="flex:2;">
                      </div>
                  </div>
                    <div class="form-group"><label>정비서비스:</label><select id="maintenanceServiceLevel"><option value=""></option></select></div>
                </div>
            </div>

            <div class="details-section" style="background:#f9f9f9; padding:20px; border-radius:6px; margin-top:15px;">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                  <h3 style="margin:0; border:none; color:#333; font-size:1rem;">계약 이력</h3>
                  <button id="openAddContractModalBtn" class="secondary" style="font-size:0.8rem; padding:4px 8px;">계약 추가</button>
                </div>
                <div class="mini-header-row">
                  <span class="col-cont-status" style="flex:0 0 70px; text-align:center;">상태</span>
                  <span class="col-cont-date" style="flex:0 0 85px; text-align:center;">계약일</span>
                  <span class="col-cont-term" style="flex:0 0 40px; text-align:center;">기간</span>
                  <span class="col-cont-cust" style="flex:0 0 100px; text-align:center;">명의자</span> <span class="col-cont-car" style="flex:1; padding-left:5px;">차종</span>
                  <span class="col-cont-no" style="flex:0 0 70px; text-align:center;">계약번호</span>
                </div>
                <ul id="contractList" style="list-style:none; padding:0; margin-top:0;"></ul>
            </div>

        </div>
      </div>
      
      <div class="detail-log-pane">
         <h3 style="margin:15px 15px 0 15px; font-size:1.1rem;">상담 기록</h3>
         <div id="consultationLogs" class="log-entries"></div>
         <div class="log-add-section">
           <textarea id="newLogContent" rows="4" placeholder="상담 내용을 입력하세요"></textarea>
           <button id="addLogBtn" style="width:100%; margin-top:8px;">기록 등록</button>
         </div>
      </div>
    </div>

    <div class="detail-panel hidden" id="addContractPanel" style="display:block; overflow-y:auto; background-color:#f8f9fa;">
      <div class="contract-detail-container" style="max-width: 800px; margin: 20px auto; background:#fff; padding:30px; border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,0.05);">
        
        <div style="margin-bottom:20px; display:flex; justify-content:space-between; align-items:center;">
           <a href="#" id="backFromAddContractBtn" class="back-link" style="font-size:1rem;">&larr; 취소하고 돌아가기</a>
           <h2 style="margin:0; color:#333;">신규 계약 등록</h2>
        </div>

        <div style="background:#e7f1ff; padding:20px; border-radius:8px; margin-bottom:25px; border:1px solid #d0e1fd;">
            <h3 style="margin-top:0; font-size:1rem; color:#0056b3; border-bottom:1px dashed #b6d4fe; padding-bottom:10px; margin-bottom:15px;">📌 계약 관리 정보 (필수)</h3>
            <div class="filter-grid" style="grid-template-columns: 1fr 1fr; gap: 15px;">
                <div class="form-group"><label>계약접수처:</label><select id="modalContractReceiptSource"><option value=""></option></select></div>
                <div class="form-group"><label>유입경로:</label><select id="modalLeadSource"><option value=""></option></select></div>
                
                <div class="form-group"><label>계약번호:</label><input type="text" id="modalContractNumber" placeholder="계약서 번호"></div>
                <div class="form-group"><label>승인번호:</label><input type="text" id="modalApprovalNumber" placeholder="심사 승인 번호"></div>
                
                <div class="form-group"><label>투입시기:</label><input type="text" id="modalInputDate"></div>
                
                <div class="form-group"><label>수수료:</label><input type="text" id="modalCommission" placeholder="직접 입력"></div>
            </div>
        </div>

        <div style="background:#f1f3f5; padding:15px; border-radius:8px; margin-bottom:25px; display:flex; align-items:center; justify-content:space-between;">
            <div>
              <strong style="color:#495057;">📄 계약서 파일이 있나요?</strong>
              <p style="margin:5px 0 0 0; font-size:0.85rem; color:#666;">계약서를 업로드하면 AI가 내용을 자동으로 입력해줍니다.</p>
            </div>
            <div style="display:flex; gap:5px;">
                <input type="file" id="contractFileInput" accept="application/pdf, image/*" style="display:none">
                <button id="btnAnalyzeContract" style="background-color:#6f42c1; border:none; padding:10px 16px; display:flex; align-items:center; gap:8px;">
                    <span>🤖 계약서 AI 자동입력</span>
                </button>
            </div>
        </div>

        <div class="form-group" style="background: #fff; border:1px solid #eee; padding: 15px; border-radius: 8px; margin-bottom:20px;">
          <label style="display:flex; align-items:center; cursor:pointer; margin:0;">
              <input type="checkbox" id="isDifferentContractor" style="width:auto; margin-right:8px; height:auto;">
              <span style="font-weight:bold; color:#0056b3;">실계약자가 다릅니까? (타인명의/법인 등)</span>
          </label>
          <div id="realContractorForm" class="hidden" style="margin-top:15px; border-top:1px solid #eee; padding-top:15px;">
            <div class="filter-grid">
                <div class="form-group"><label>실계약자 이름:</label><input type="text" id="realContractorName"></div>
                <div class="form-group"><label>연락처:</label><input type="tel" id="realContractorPhone" placeholder="010-0000-0000"></div>
            </div>
            <div class="form-group"><label>관계:</label><select id="contractorRelation"><option>가족/배우자</option><option>지인/소개</option><option>법인/임직원</option></select></div>
          </div>
        </div>

        <h3 style="font-size:1rem; border-bottom:2px solid #333; padding-bottom:10px; margin-bottom:15px;">차량 및 금융 정보</h3>
        
        <div class="filter-grid" style="grid-template-columns: 1fr 1fr; gap: 15px;">
          <div class="form-group"><label>상품명:</label><input type="text" id="modalProductName"></div>
          <div class="form-group"><label>계약일:</label><input type="date" id="modalContractDate"></div>
          
          <div class="form-group full-width"><label>차종 (세부모델):</label><input type="text" id="modalContractCarModel"></div>
          
          <div class="form-group"><label>차량가격:</label><input type="text" id="modalCarPrice" placeholder="숫자만 입력"></div>
          <div class="form-group"><label>월 렌탈료:</label><input type="number" id="modalContractAmount"></div>

          <div class="form-group"><label>외장색상:</label><input type="text" id="modalExteriorColor"></div>
          <div class="form-group"><label>내장색상:</label><input type="text" id="modalInteriorColor"></div>
          
          <div class="form-group"><label>계약기간(개월):</label><input type="number" id="modalContractTerm"></div>
          <div class="form-group"><label>약정주행(km):</label><input type="text" id="modalAgreedMileage"></div>
          
          <div class="form-group"><label>인수가(잔존):</label><input type="text" id="modalAcquisitionPrice"></div>
          <div class="form-group"><label>보증금/선납금:</label><input type="text" id="modalDepositInfo"></div>
          
          <div class="form-group"><label>위약금율(%):</label><input type="text" id="modalPenaltyRate"></div>
          <div class="form-group"><label>정비상품:</label><input type="text" id="modalMaintenanceProduct"></div>
        </div>
        
        <div class="form-group" style="margin-top:15px;">
            <label>특이사항 / 메모:</label>
            <textarea id="modalContractSummary" rows="4" style="width:100%;"></textarea>
        </div>

        <div class="modal-actions" style="display:flex; justify-content:center; gap:15px; margin-top:30px; border-top:1px solid #eee; padding-top:20px;">
          <button id="cancelAddContractPageBtn" class="secondary" style="padding:10px 30px; font-size:1rem;">취소</button>
          <button id="saveNewContractPageBtn" style="padding:10px 40px; font-size:1rem; font-weight:bold;">계약 저장하기</button>
        </div>
      </div>
    </div>
  </div> <script>
    <?!= include('Js_Config'); ?>
    <?!= include('Js_Utils'); ?>
    <?!= include('Js_Api'); ?>
    <?!= include('Js_Ui'); ?>
  </script>
</body>
</html>
