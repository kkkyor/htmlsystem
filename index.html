<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <title>ê³ ê° ìƒë‹´ì¼ì§€ ê¸°ë¡ì‹œìŠ¤í…œ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700" rel="stylesheet">

  <style>
    /* (CSS ìŠ¤íƒ€ì¼ì€ ì´ì „ê³¼ ë™ì¼) */
    body { font-family: 'Arial', sans-serif; line-height: 1.6; margin: 0; padding: 20px; background-color: #f4f4f4; color: #333; }
    .container { max-width: 1500px; margin: auto; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); }
    .list-panel, .detail-panel { padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
    h2, h3 { color: #0056b3; border-bottom: 2px solid #eee; padding-bottom: 5px; margin-top: 0; }
    ul { list-style: none; padding: 0; max-height: 70vh; overflow-y: auto; }
    li { background: #eee; margin-bottom: 8px; padding: 10px; border-radius: 4px; cursor: pointer; transition: background-color 0.3s ease; border-left: 3px solid transparent; }
    li:hover { background-color: #ddd; }
    li.active { background-color: #cce5ff; border-left: 3px solid #0056b3; font-weight: bold; }
    li strong { color: #0056b3; }
    .list-item-status { font-size: 0.9em; color: #555; }
    .info-item { margin-bottom: 10px; display: flex; align-items: center; }
    .info-item strong { display: inline-block; width: 120px; color: #555; flex-shrink: 0; }
    .info-input { border: 1px solid #ccc; padding: 5px; border-radius: 4px; font-size: 1rem; }
    .back-link { display: inline-block; margin-bottom: 20px; color: #007bff; text-decoration: none; font-weight: bold; font-size: 1.1rem; }
    .back-link:hover { text-decoration: underline; }
    .form-group { margin-bottom: 15px; }
    .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
    .form-group select, .form-group textarea, .form-group input { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 1rem; box-sizing: border-box; font-family: 'Roboto', sans-serif; }
    .form-group textarea { resize: vertical; min-height: 200px; }
    button { background-color: #007bff; color: white; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; font-size: 1rem; transition: background-color 0.3s ease; }
    button:hover { background-color: #0056b3; }
    button:disabled { background-color: #ccc; cursor: not-allowed; }
    button.secondary { background-color: #6c757d; }
    button.secondary:hover { background-color: #5a6268; }
    .details-section { border-top: 1px solid #eee; margin-top: 20px; padding-top: 15px; }
    .details-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 15px; }
    .contract-info { background-color: #e9f5ff; padding: 15px; border-radius: 5px; }
    .contract-info h3 { color: #004085; border-bottom-color: #b8daff; }
    .log-entries { min-height: 250px; max-height: 400px; overflow-y: auto; border: 1px solid #eee; padding: 10px; background-color: #fdfdfd; }
    .log-entry { background: #f9f9f9; border-bottom: 1px solid #eee; padding: 10px; margin-bottom: 5px; font-size: 0.9rem; white-space: pre-wrap; }
    .log-entry:last-child { border-bottom: none; }
    .log-entry strong { color: #0056b3; margin-right: 10px; }
    .filter-panel { margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 5px; background-color: #f9f9f9; }
    .filter-group { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; align-items: end; }
    .filter-group select,
    .filter-group input,
    .search-group input {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-family: 'Roboto', sans-serif;
    }
    .search-group { 
      flex-basis: 50%;
    }
    .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); z-index: 100001; display: flex; justify-content: center; align-items: center; }
    #loader {
      z-index: 100002;
    }
    .modal-content { background: #fff; padding: 25px; border-radius: 8px; width: 90%; max-width: 500px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
    .modal-actions { text-align: right; margin-top: 20px; display: flex; gap: 10px; justify-content: flex-end; }
    .loader-content { display: flex; flex-direction: column; align-items: center; color: white; font-size: 1.2rem; }
    .spinner { border: 6px solid #f3f3f3; border-top: 6px solid #007bff; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin-bottom: 15px; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .status-badge {
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 0.85em;
      font-weight: bold;
      color: #333;
      background-color: #e0e0e0; 
    }
    .status-badge.consulting { 
      background-color: #fff3cd;
      color: #664d03;
    }
    .status-badge.completed { 
      background-color: #d1e7dd;
      color: #0f5132;
    }
    .status-badge.contracted { 
      background-color: #cce5ff;
      color: #004085;
      border: 1px solid #0056b3;
    }
    .status-badge.failed { 
      background-color: #f8d7da;
      color: #58151c;
    }
    .filter-top-row {
      display: flex;
      justify-content: space-between;
      align-items: end;
      margin-bottom: 15px; 
      gap: 15px;
    }
    .list-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline; 
      margin-bottom: 10px; 
    }
    .filter-actions {
      display: flex;
      gap: 10px;
    }
    .hidden { display: none !important; }
    #assignedCustomersList li {
    background: #f9f9f9;
    margin-bottom: 10px;
    padding: 12px 15px;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    border-left: 4px solid transparent;
    line-height: 1.5;
  }

   .error-modal-content {
      background: #fff; 
      padding: 25px; 
      border-radius: 8px; 
      width: 90%; 
      max-width: 400px; 
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }
    .error-modal-content h3 {
      color: #dc3545;
      margin-top: 0;
      border-bottom: 2px solid #eee;
    }
    .error-modal-content p {
      margin: 20px 0;
      font-size: 1.1rem;
    }
    .error-modal-btn {
      background-color: #dc3545 !important; 
      color: white;
      width: 100%;
    }
    .error-modal-btn:hover {
      background-color: #c82333 !important;
    }

    @media (max-width: 768px) {
      body {
        padding: 10px;
      }
      .container {
        padding: 10px;
      }
      .details-grid, .filter-group {
        grid-template-columns: 1fr !important;
      }
      .filter-top-row {
        flex-direction: column;
        align-items: stretch;
      }
      .search-group {
        flex-basis: 100%;
      }
      .filter-actions {
        width: 100%;
        justify-content: stretch;
      }
      .filter-actions button {
        flex: 1;
      }
      li {
        padding: 15px;
      }
      button {
        min-height: 44px;
      }
      .info-item {
        flex-direction: column;
        align-items: flex-start;
      }
      .info-item strong {
        width: 100%;
        margin-bottom: 5px;
      }
    }

  /* ìŠ¤ì¼ˆë ˆí†¤ ë¡œë”© UI */
    .skeleton-li {
      background: #f9f9f9;
      margin-bottom: 10px;
      padding: 12px 15px;
      border-radius: 5px;
      border-left: 4px solid transparent;
      line-height: 1.5;
    }
    .skeleton-item {
      background: linear-gradient(90deg, #eee 25%, #e0e0e0 50%, #eee 75%);
      background-size: 200% 100%;
      animation: skeleton-shine 1.5s infinite linear;
      border-radius: 4px;
    }
    .skeleton-li .line-1 { height: 1.15em; width: 40%; margin-bottom: 8px; }
    .skeleton-li .line-2 { height: 0.95em; width: 60%; margin-bottom: 8px; }
    .skeleton-li .line-3 { height: 0.9em; width: 30%; border-top: 1px solid #eee; padding-top: 8px; }
    @keyframes skeleton-shine {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

  /* ì €ì¥ ì„±ê³µ ì‹œê°ì  í”¼ë“œë°± */
    .flash-success {
      animation: flash-green 1s ease-out;
    }
    @keyframes flash-green {
      0% { background-color: #d4edda; }
      100% { background-color: #f9f9f9; }
    }
    /* (style íƒœê·¸ ì•ˆ ê¸°ì¡´ CSS ê·œì¹™ë“¤ ì•„ë˜ì— ì¶”ê°€) */

  .form-group-inline label {
    /* ì¸ë¼ì¸ ê·¸ë£¹ì—ì„œëŠ” ë ˆì´ë¸”ì´ ë„ˆë¬´ ë§ì€ ê³µê°„ ì°¨ì§€ ì•Šë„ë¡ ì¡°ì • (ì„ íƒ ì‚¬í•­) */
    margin-bottom: 3px; 
  }

  .input-button-group {
    display: flex; /* inputê³¼ buttonì„ ê°€ë¡œë¡œ ë°°ì¹˜ */
    align-items: center; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
    gap: 8px; /* inputê³¼ button ì‚¬ì´ ê°„ê²© */
  }

  .input-button-group input {
    flex-grow: 1; /* inputì´ ë‚¨ì€ ê³µê°„ì„ ëª¨ë‘ ì°¨ì§€í•˜ë„ë¡ */
    /* ë²„íŠ¼ê³¼ ë†’ì´ë¥¼ ë§ì¶”ê¸° ìœ„í•´ padding ì¡°ì • (ê¸°ì¡´ .info-input ìŠ¤íƒ€ì¼ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ) */
    padding: 8px 10px; 
    height: auto; /* ëª…ì‹œì  ë†’ì´ ì œê±° */
    line-height: normal; /* ë¼ì¸ ë†’ì´ ì´ˆê¸°í™” */
    min-height: 44px; /* ë²„íŠ¼ê³¼ ìµœì†Œ ë†’ì´ ë§ì¶¤ */
    box-sizing: border-box; 
  }

  .input-button-group button {
    flex-shrink: 0; /* ë²„íŠ¼ í¬ê¸°ê°€ ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ */
    /* inputê³¼ ë†’ì´/íŒ¨ë”© ì¡°ì • */
    padding: 8px 12px; 
    font-size: 0.9rem; /* ë²„íŠ¼ í°íŠ¸ ì•½ê°„ ì‘ê²Œ (ì„ íƒ ì‚¬í•­) */
    height: 44px; /* inputê³¼ ë†’ì´ ë§ì¶¤ */
    line-height: 1.5; /* ë²„íŠ¼ í…ìŠ¤íŠ¸ ì„¸ë¡œ ì •ë ¬ */
    box-sizing: border-box;
  }
  .detail-panel #assignmentDetails .details-section:first-child .form-group,
  .detail-panel #assignmentDetails .details-section:first-child .form-group-inline {
    max-width: 450px; /* UXìƒ ìì—°ìŠ¤ëŸ¬ìš´ ìµœëŒ€ ë„ˆë¹„ (ì¡°ì ˆ ê°€ëŠ¥) */
  /* (style íƒœê·¸ ì•ˆì— ì¶”ê°€) */

  /* h3 íƒœê·¸ ë‚´ë¶€ì— ì œëª©ê³¼ ë²„íŠ¼ì„ ì–‘ëìœ¼ë¡œ ë°°ì¹˜ */
  .details-section h3 {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  /* í† ê¸€ ë²„íŠ¼ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
  .toggle-section-btn {
    font-size: 0.85rem;    /* í°íŠ¸ í¬ê¸° ì‘ê²Œ */
    padding: 3px 10px;     /* íŒ¨ë”© ì¶•ì†Œ */
    /* 'secondary' ìŠ¤íƒ€ì¼(íšŒìƒ‰)ì„ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš© */
    background-color: #6c757d;
    min-height: auto;      /* ë‹¤ë¥¸ ë²„íŠ¼ê³¼ ë†’ì´ ë‹¤ë¥´ê²Œ */
    height: auto;
    line-height: 1.5;
  }
  .toggle-section-btn:hover {
    background-color: #5a6268;
  }

}
  </style>
</head>
<body data-view="<?= view ?>" data-is-dual-mode="<?= isDualMode ?>" data-script-url="<?= scriptUrl ?>">

  <div id="loader" class="modal-overlay hidden" role="alert" aria-live="assertive">
    <div class="loader-content"><div class="spinner"></div><p>ì²˜ë¦¬ ì¤‘ì…ë‹ˆë‹¤...</p></div>
  </div>
  
  <div id="addCustomerModal" class="modal-overlay hidden">
    <div class="modal-content">
      <h2>ì‹ ê·œ ê³ ê° ì¶”ê°€</h2>
      <div class="form-group"><label for="newDbType">ë””ë¹„ ìœ í˜•:</label><select id="newDbType"></select></div>
      <div class="form-group"><label for="newCustomerName">ê³ ê°ëª…:</label><input type="text" id="newCustomerName" placeholder="ê³ ê°ëª…ì„ ì…ë ¥í•˜ì„¸ìš” (í•„ìˆ˜)"></div>
      <div class="form-group"><label for="newCustomerPhoneNumber">ê³ ê° ì „í™”ë²ˆí˜¸:</label><input type="tel" id="newCustomerPhoneNumber" placeholder="ìˆ«ì ë˜ëŠ” '-'ë¥¼ í¬í•¨í•˜ì—¬ ì…ë ¥"></div>
      <div class="modal-actions"><button id="cancelAddCustomerBtn" class="secondary">ì·¨ì†Œ</button><button id="saveNewCustomerBtn">ì €ì¥</button></div>
    </div>
  </div>

  <div class="container">
        <div class="list-panel" id="listPanel">
      
      <div class="list-header">
        <h2>ë‚˜ì—ê²Œ ë°°ì •ëœ ê³ ê° ëª©ë¡</h2>
        <div class="add-action-panel" style="display: flex; gap: 10px;">
          <button id="switchToDualModeBtn" class="secondary">ğŸ–¥ï¸ ë“€ì–¼ ëª¨ë“œ</button>
          <button id="openAddCustomerModalBtn">+ ì‹ ê·œ ê³ ê° ì¶”ê°€</button>
        </div>
      </div>
      
      <div class="filter-panel">
        <h3>ëª©ë¡ í•„í„°ë§</h3>
        <div class="filter-top-row">
          <div class="search-group">
            <label for="filterSearchTerm">ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰:</label>
            <input type="text" id="filterSearchTerm" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥...">
          </div>
          <div class="filter-actions">
            <button id="resetFilterBtn" class="secondary">í•„í„° ì´ˆê¸°í™”</button>
            <button id="applyFilterBtn">í•„í„° ì ìš©</button>
          </div>
        </div>
        <div class="filter-group">
          <div><label for="filterDbType">ë””ë¹„ ìœ í˜•:</label><select id="filterDbType"><option value="">ì „ì²´</option></select></div>
          <div><label for="filterAssignmentDateFrom">ë°°ì •ì¼ ì‹œì‘:</label><input type="date" id="filterAssignmentDateFrom"></div>
          <div><label for="filterAssignmentDateTo">ë°°ì •ì¼ ì¢…ë£Œ:</label><input type="date" id="filterAssignmentDateTo"></div>
          <div><label for="filterConsultationStatus">ìƒë‹´ ìƒíƒœ:</label><select id="filterConsultationStatus"><option value="">ì „ì²´</option><option value="ë°°ì •ë¨">ë°°ì •ë¨</option><option value="ì—°ë½ ì‹œë„ ì¤‘">ì—°ë½ ì‹œë„ ì¤‘</option><option value="ìƒë‹´ ì§„í–‰ ì¤‘">ìƒë‹´ ì§„í–‰ ì¤‘</option><option value="ì¶”ê°€ ì •ë³´ ìš”ì²­">ì¶”ê°€ ì •ë³´ ìš”ì²­</option><option value="ìƒë‹´ ì™„ë£Œ">ìƒë‹´ ì™„ë£Œ</option></select></div>
          <div><label for="filterContractStatus">ê³„ì•½ ìƒíƒœ:</label><select id="filterContractStatus"><option value="">ì „ì²´</option><option value="ë¯¸í•´ë‹¹">ë¯¸í•´ë‹¹</option><option value="ê³„ì•½ ì œì•ˆ">ê³„ì•½ ì œì•ˆ</option><option value="í˜‘ìƒ ì¤‘">í˜‘ìƒ ì¤‘</option><option value="ê³„ì•½ ì²´ê²°">ê³„ì•½ ì²´ê²°</option><option value="ê³„ì•½ ë¬´ì‚°">ê³„ì•½ ë¬´ì‚°</option><option value="ê³„ì•½ ì¢…ë£Œ">ê³„ì•½ ì¢…ë£Œ</option></select></div>
        </div>
      </div>
      <ul id="assignedCustomersList"><li>ë¡œë”© ì¤‘...</li></ul>
      <div style="text-align: center; margin-top: 20px;">
        <button id="loadMoreBtn" class="secondary hidden">+ ë”ë³´ê¸°</button>
      </div>
    </div>
    
    <div class="detail-panel hidden" id="customerDetailPanel">
            <a href="#" id="backToListBtn" class="back-link">&larr; ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
      <h2 id="detailCustomerName">ê³ ê° ìƒì„¸ ì •ë³´</h2>
      <div id="assignmentDetails">
        <div class="details-section">
        <h3>ê³ ê° ê¸°ë³¸ ì •ë³´</h3> 
        <div class="info-item"> 
            <strong>ê³ ê°ëª…:</strong> <span id="detailCustomerNameSpan"></span> </div>
          <div class="info-item">
            <strong>ë°°ì • ID:</strong> <span id="detailAssignmentId"></span>
          </div>
          <div class="info-item">
            <strong>DB ìœ í˜•:</strong> <span id="detailDbType"></span>
          </div>
          <div class="info-item">
            <strong>ë°°ì •ì¼:</strong> <span id="detailAssignmentDate"></span>
          </div>
          <div class="info-item"> 
          <strong>ì—°ë½ì²˜:</strong> 
          <div class="input-button-group">
            <input type="tel" id="detailCustomerPhoneNumber" class="info-input"> 
            <button id="savePhoneNumberBtn">ë²ˆí˜¸ ì €ì¥</button>
          </div>
        </div>

        <div class="info-item"> 
          <strong>ìœ ì… ê²½ë¡œ:</strong> 
          <select id="leadSource" class="info-input"> <option value="">-- ì„ íƒ --</option>
          </select>
        </div> 
      </div>
      <button id="toggleCustomerInfoBtn" class="toggle-section-btn secondary" style="margin-right: 10px;">ìƒì„¸ ì •ë³´ ìˆ¨ê¸°ê¸°</button>
      <div id="customerInfoGroup">
        <div class="details-section"> 
          <h3>ê³ ê° ìƒì„¸ ì •ë³´ </h3> 
          <div class="details-grid"> 
            <div class="form-group">
              <label for="customerType">ê³ ê° ìœ í˜•:</label>
              <select id="customerType"><option value="">-- ì„ íƒ --</option><option value="ê°œì¸">ê°œì¸</option><option value="ê°œì¸ì‚¬ì—…ì">ê°œì¸ì‚¬ì—…ì</option><option value="ë²•ì¸">ë²•ì¸</option></select>
            </div>
            <div class="form-group">
              <label for="gender">ì„±ë³„:</label>
              <select id="gender"><option value="">-- ì„ íƒ --</option><option value="ë‚¨ì„±">ë‚¨ì„±</option><option value="ì—¬ì„±">ì—¬ì„±</option></select>
            </div>
            <div class="form-group">
              <label for="ageGroup">ì—°ë ¹ëŒ€:</label>
              <select id="ageGroup"><option value="">-- ì„ íƒ --</option></select> 
            </div>
            <div class="form-group">
              <label for="addressCity">ì£¼ì†Œ (ì‹œ/ë„):</label>
              <select id="addressCity"><option value="">-- ì„ íƒ --</option></select> 
            </div>
            <div class="form-group">
              <label for="addressDistrict">ì£¼ì†Œ (ì‹œ/êµ°/êµ¬):</label>
              <select id="addressDistrict"><option value="">-- ì„ íƒ --</option></select> 
            </div>
            <div class="form-group">
              <label for="incomeType">ì†Œë“ êµ¬ë¶„:</label>
              <select id="incomeType"><option value="">-- ì„ íƒ --</option></select> 
            </div>
            <div class="form-group">
              <label for="creditInfo">ì‹ ìš© ì •ë³´:</label>
              <select id="creditInfo"><option value="">-- ì„ íƒ --</option></select> 
            </div>
          </div> 
        </div>
        <div class="details-section">
          <h3>ê³ ê° ë‹ˆì¦ˆ</h3>
          <div class="details-grid">
            <div class="form-group"><label for="interestedCarModel">ê´€ì‹¬ ì°¨ì¢…:</label><input type="text" id="interestedCarModel"></div>
            <div class="form-group"><label for="comparisonCarModel">ë¹„êµ ì°¨ëŸ‰:</label><input type="text" id="comparisonCarModel"></div>
            <div class="form-group"><label for="ownedCarModel">ë³´ìœ  ì°¨ëŸ‰:</label><input type="text" id="ownedCarModel"></div>
            <div class="form-group">
              <label for="carUsage">ì°¨ëŸ‰ ìš©ë„:</label>
              <select id="carUsage"><option value="">-- ì„ íƒ --</option></select> </div>
             <div class="form-group">
              <label for="driverScope">ìš´ì „ì ë²”ìœ„:</label> <input type="text" id="driverScope" placeholder="ì˜ˆ: ëˆ„êµ¬ë‚˜">
            </div>
          </div>
        </div>

        <div class="details-section">
          <h3>í¬ë§ ê³„ì•½ ì¡°ê±´</h3>
          <div class="details-grid">
            <div class="form-group">
              <label for="expectedContractTiming">ê³„ì•½ ì˜ˆì • ì‹œê¸°:</label>
              <select id="expectedContractTiming"><option value="">-- ì„ íƒ --</option></select> </div>
            <div class="form-group">
              <label for="desiredContractTerm">í¬ë§ ê³„ì•½ ê¸°ê°„:</label>
              <select id="desiredContractTerm"><option value="">-- ì„ íƒ --</option></select> </div>
            <div class="form-group">
              <label for="desiredInitialCostType">í¬ë§ ì´ˆê¸° ë¹„ìš©:</label>
              <select id="desiredInitialCostType"><option value="">-- ì„ íƒ --</option></select> </div>
            <div class="form-group">
              <label for="maintenanceServiceLevel">ì •ë¹„ ì„œë¹„ìŠ¤:</label>
              <select id="maintenanceServiceLevel"><option value="">-- ì„ íƒ --</option></select> </div>
            <div class="form-group"><label for="salesCondition">íŒë§¤ ì¡°ê±´:</label><input type="text" id="salesCondition"></div>
            <div class="form-group">
              <label for="isRepurchase">ì¬êµ¬ë§¤ ì—¬ë¶€:</label>
              <select id="isRepurchase"><option value="">-- ì„ íƒ --</option><option value="Y">Y</option><option value="N">N</option></select>
            </div>
            <div class="form-group"><label for="paymentMethod">ê²°ì œ ë°©ì‹:</label><input type="text" id="paymentMethod" placeholder="ì˜ˆ: í˜„ê¸ˆ, ì¹´ë“œ"></div> </div>
        </div>
      </div>

        <div class="details-section">
            <h3>ìƒë‹´ / ê³„ì•½ ìƒíƒœ</h3>
            <div class="details-grid">
              <div class="form-group">
                <label for="customerStatus">ê³ ê° ìƒíƒœ:</label>
                <select id="customerStatus"><option value="">-- ì„ íƒ --</option></select> </div>
              <div class="form-group">
                <label for="consultationStatus">ìƒë‹´ ìƒíƒœ:</label>
                <select id="consultationStatus"><option value="">-- ì„ íƒ --</option><option value="ë°°ì •ë¨">ë°°ì •ë¨</option><option value="ì—°ë½ ì‹œë„ ì¤‘">ì—°ë½ ì‹œë„ ì¤‘</option><option value="ìƒë‹´ ì§„í–‰ ì¤‘">ìƒë‹´ ì§„í–‰ ì¤‘</option><option value="ì¶”ê°€ ì •ë³´ ìš”ì²­">ì¶”ê°€ ì •ë³´ ìš”ì²­</option><option value="ìƒë‹´ ì™„ë£Œ">ìƒë‹´ ì™„ë£Œ</option></select>
              </div>
              <div class="form-group">
                <label for="contractStatus">ê³„ì•½ ìƒíƒœ:</label>
                <select id="contractStatus"><option value="">-- ì„ íƒ --</option><option value="ë¯¸í•´ë‹¹">ë¯¸í•´ë‹¹</option><option value="ê³„ì•½ ì œì•ˆ">ê³„ì•½ ì œì•ˆ</option><option value="í˜‘ìƒ ì¤‘">í˜‘ìƒ ì¤‘</option><option value="ê³„ì•½ ì²´ê²°">ê³„ì•½ ì²´ê²°</option><option value="ê³„ì•½ ë¬´ì‚°">ê³„ì•½ ë¬´ì‚°</option><option value="ê³„ì•½ ì¢…ë£Œ">ê³„ì•½ ì¢…ë£Œ</option></select>
              </div>
            </div>
            <button id="saveCustomerDetailsBtn">ê³ ê° ë° ìƒë‹´ ì •ë³´ ì €ì¥</button>
        </div>

        <div id="contractInfoSection" class="hidden details-section contract-info">
          <h3>ê³„ì•½ ìƒì„¸ ì •ë³´</h3>
          <div class="details-grid">
            <div class="form-group"><label for="contractDate">ê³„ì•½ ì²´ê²°ì¼:</label><input type="date" id="contractDate"></div>
            <div class="form-group"><label for="contractAmount">ê³„ì•½ ê¸ˆì•¡:</label><input type="number" id="contractAmount" step="1000"></div>
            <div class="form-group" style="grid-column: 1 / -1;"><label for="contractSummary">ê³„ì•½ ë‚´ìš© ìš”ì•½:</label><textarea id="contractSummary"></textarea></div>
            <div class="form-group"><label for="contractFileInfo">ê³„ì•½ì„œ íŒŒì¼ ì •ë³´:</label><input type="text" id="contractFileInfo" placeholder="ì˜ˆ: ê³„ì•½ì„œ_ê³ ê°ëª….pdf"></div>
            <div class="form-group" style="grid-column: 1 / -1;"><label for="contractReview">ê³„ì•½ ë¦¬ë·°:</label><textarea id="contractReview"></textarea></div>
          </div>
          <button id="saveContractBtn">ê³„ì•½ ì •ë³´ ì €ì¥</button>
        </div>
        
        <div class="details-section">
          <h3>ìƒë‹´ ìƒì„¸ ê¸°ë¡</h3>
          <div class="log-entries" id="consultationLogs"><p>ê¸°ë¡ ì—†ìŒ</p></div>
          <h3>ìƒˆ ìƒë‹´ ê¸°ë¡ ì¶”ê°€</h3>
          <div class="form-group"><textarea id="newLogContent" placeholder="ìƒë‹´ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..." spellcheck="false"></textarea></div>
          <button id="addLogBtn">ê¸°ë¡ ì¶”ê°€</button>
        </div>

      </div>
        </div>
    </div>
  </div>

<script>
  <?!= HtmlService.createTemplateFromFile('JavaScript').getRawContent() ?>
</script>
</body>
</html>
