<style>
    /* ----------------------------------------------------------------- */
    /* 1. 기본 스타일 및 레이아웃 */
    /* ----------------------------------------------------------------- */
    body { 
      font-family: 'Noto Sans KR', 'Roboto', sans-serif; 
      background-color: #f0f2f5; 
      margin: 0; padding: 10px; 
      overflow: hidden; color: #333;
    }
    /* [Style.html] 스타일 추가 */
    .col-manager { flex: 0 0 70px; text-align: center; color: #d63384; font-weight: bold; font-size: 0.8rem; }
    /* 모바일에서는 공간 부족하면 숨기기 */
    @media (max-width: 768px) { .col-manager { display: none; } }

    .container {
      width: 100%; height: calc(100vh - 20px);
      background: #fff; border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      display: flex; flex-direction: column;
      overflow: hidden; box-sizing: border-box;
    }
    .hidden { display: none !important; }

    /* 탭 디자인 */
    .tab-container {
      background-color: #fff; padding: 5px; border-radius: 8px;
      display: flex; gap: 5px; margin-bottom: 5px; /* [수정] 10px -> 5px */
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .modern-tab {
      flex: 1; border: none; background: transparent;
      padding: 8px 0; /* [수정] 10px -> 8px */
      border-radius: 6px;
      font-weight: 700; color: #868e96; cursor: pointer;
      transition: all 0.2s ease; font-size: 0.9rem; /* [수정] 0.95rem -> 0.9rem */
    }
    .modern-tab.active { background-color: #e7f5ff; color: #007bff; }
    .modern-tab:hover:not(.active) { background-color: #f8f9fa; color: #495057; }

    /* 패널 레이아웃 */
    .list-panel, .detail-panel { flex: 1; display: flex; gap: 0; height: 100%; overflow: hidden; }
    .list-left-pane { flex: 0 0 320px; display: flex; flex-direction: column; border-right: 1px solid #dee2e6; background-color: #fcfcfc; }
    .list-right-pane { flex: 1; display: flex; flex-direction: column; background: #fff; overflow: hidden; }
    .filter-panel { padding: 10px 15px; overflow-y: auto; } /* [수정] 상하 패딩 축소 */
    .list-header { padding: 8px 15px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; background: #fff; flex-shrink: 0; } /* [수정] 패딩 축소 */

    /* 상세 화면 구조 */
    .detail-log-pane { flex: 0 0 450px; display: flex; flex-direction: column; border-left: 1px solid #dee2e6; background: #fdfdfd; } /* [수정] 너비 500 -> 450 */
    .detail-info-pane { flex: 1; padding: 15px; overflow-y: auto; } /* [수정] 패딩 20 -> 15 */

    /* 폼 요소 컴팩트화 */
    .form-group { margin-bottom: 4px; } /* [수정] 8px -> 4px */
    .form-group label { display: block; margin-bottom: 2px; font-size: 0.75rem; font-weight: 600; color: #666; } /* [수정] 마진/폰트 축소 */
    
    input, select, textarea {
      width: 100%; padding: 4px 6px; /* [수정] 패딩 축소 */
      border: 1px solid #d1d3e2; border-radius: 4px;
      font-size: 0.85rem; /* [수정] 0.9rem -> 0.85rem */
      font-family: 'Noto Sans KR', sans-serif; 
      box-sizing: border-box; 
      height: 30px; /* [수정] 36px -> 30px (높이 축소) */
    }
    textarea { height: auto; }
    input:focus, select:focus, textarea:focus { outline: none; border-color: #007bff; box-shadow: 0 0 0 2px rgba(0,123,255,0.1); }
    
    button { 
      cursor: pointer; border: none; border-radius: 4px; padding: 6px 10px; /* [수정] 버튼 크기 축소 */
      background: #007bff; color: white; font-weight: 500; font-size: 0.85rem; transition: background 0.2s; 
    }
    button:hover { background: #0069d9; }
    button.secondary { background: #6c757d; color: white; }
    button.secondary:hover { background: #5a6268; }

    /* ----------------------------------------------------------------- */
    /* 2. 리스트 및 테이블 디자인 */
    /* ----------------------------------------------------------------- */
    
    /* 공통 헤더 스타일 */
    .list-header-row {
      display: flex; align-items: center;
      padding: 8px 10px; /* [수정] 패딩 축소 */
      background: #f1f3f5;
      border-bottom: 2px solid #dee2e6;
      font-weight: bold; color: #495057; font-size: 0.8rem;
    }
    
    /* 리스트 아이템 공통 */
    .contract-row, #assignedCustomersList li {
      display: flex; align-items: center; 
      padding: 8px 10px; /* [수정] 패딩 축소 */
      border-bottom: 1px solid #f1f3f5; 
      cursor: pointer; background: #fff;
      transition: background 0.1s;
      font-size: 0.85rem; /* [수정] 리스트 폰트 축소 */
    }
    .contract-row:hover, #assignedCustomersList li:hover { background-color: #eef7ff; }

    /* 1. 고객 목록 컬럼 */
    .col-db     { flex: 0 0 70px; text-align: center; color: #555; }
    .col-source { flex: 0 0 80px; text-align: center; color: #555; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }
    .col-status { flex: 0 0 80px; text-align: center; } /* 너비 약간 축소 */
    .col-name   { flex: 0 0 90px; text-align: center; font-weight: bold; color: #004085; }
    .col-phone  { flex: 0 0 105px; text-align: center; color: #444; }
    .col-memo   { flex: 1; padding: 0 10px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; color: #666; text-align: left; }
    .col-last   { flex: 0 0 85px; text-align: center; color: #d63384; font-weight: 500; }
    .col-date   { flex: 0 0 85px; text-align: center; color: #888; }

    /* 2. 계약 목록 컬럼 */
    .col-cont-status  { flex: 0 0 70px; text-align: center; }
    .col-cont-date    { flex: 0 0 80px; text-align: center; color: #666; }
    .col-cont-term    { flex: 0 0 50px; text-align: center; color: #444; }
    .col-cont-cust    { flex: 0 0 90px; text-align: center; color: #0056b3; font-weight: 500; }
    .col-cont-car     { flex: 1; font-weight: bold; color: #333; padding: 0 10px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; text-align: left; }
    .col-cont-receipt { flex: 0 0 85px; text-align: center; color: #555; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }
    .col-cont-source  { flex: 0 0 75px; text-align: center; color: #555; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }
    .col-cont-db      { flex: 0 0 65px; text-align: center; color: #888; font-size: 0.8rem; }

    /* 미니 리스트 헤더 */
    .mini-header-row {
      display: flex; align-items: center;
      padding: 6px 10px; background: #f8f9fa; 
      border-bottom: 1px solid #dee2e6; border-top: 1px solid #dee2e6;
      font-weight: bold; color: #666; font-size: 0.75rem; margin-top: 8px;
    }
    #contractList li {
      display: flex; align-items: center; padding: 8px 10px; 
      border-bottom: 1px solid #eee; cursor: pointer;
    }
    #contractList li:hover { background-color: #f8f9fa; }

    /* [Style.html] 상태 배지 스타일 업그레이드 */
    .status-badge { 
        padding: 3px 8px; 
        border-radius: 12px; 
        font-size: 0.75rem; 
        background: #eee; 
        font-weight: bold; 
        color: #555; 
        white-space: nowrap; /* 줄바꿈 방지 */
    }

    /* 1. 성공 (계약, 출고, 상담완료) - 산뜻한 초록색 */
    .status-badge.success { background: #d1e7dd; color: #0f5132; }

    /* 2. 진행/주의 (상담중, 연락중) - 눈에 띄는 노랑/주황색 */
    .status-badge.warning { background: #fff3cd; color: #856404; }

    /* 3. 위험/취소 (취소, 해지, 이탈) - 경고의 빨간색 */
    .status-badge.danger { background: #f8d7da; color: #842029; }

    /* 4. 정보/알림 (승인, 배정) - 신뢰감 있는 파란색 */
    .status-badge.info { background: #cff4fc; color: #055160; }

    /* 5. 종료/만기 (만기, 반납) - 차분한 짙은 회색/보라색 */
    .status-badge.dark { background: #e2e3e5; color: #41464b; }

    /* ----------------------------------------------------------------- */
    /* 3. 기타 상세 스타일 */
    /* ----------------------------------------------------------------- */
    .search-bar-group { display: flex; gap: 5px; align-items: center; }
    .filter-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; } /* [수정] gap 축소 */
    .full-width { grid-column: span 2; }
    
    /* [수정] 상세 그리드 간격 대폭 축소 */
    .details-grid { 
        display: grid; 
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); 
        gap: 6px 12px; /* 세로 6px, 가로 12px */
        margin-bottom: 10px; 
    }
    .span-2 { grid-column: span 2; }
    .span-3 { grid-column: span 3; } 
    .span-full { grid-column: 1 / -1; }

    /* [수정] 섹션 박스 여백 축소 */
    .details-section {
        background: #fff;
        border: 1px solid #e0e0e0;
        border-radius: 6px;
        padding: 10px; /* 내부 패딩 축소 */
        margin-bottom: 12px; /* 외부 마진 축소 */
        box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
    .details-section h3 {
        background: #f8f9fa;
        padding: 6px 10px; /* 헤더 패딩 축소 */
        margin: -10px -10px 10px -10px; /* 마진 조정 */
        border-bottom: 1px solid #eee;
        border-radius: 6px 6px 0 0;
        font-size: 0.9rem;
        color: #333;
        font-weight: bold;
    }
    /* 읽기 전용 박스 스타일 */
    .read-only-box {
        display: block; 
        padding: 4px 6px; 
        background: #f1f3f5; 
        border-radius: 4px; 
        font-size: 0.85rem; 
        color: #495057;
        min-height: 20px; /* 높이 확보 */
        line-height: 1.5;
    }

    .log-entries { flex: 1; overflow-y: auto; border: 1px solid #e3e6f0; border-radius: 4px; padding: 10px; margin: 10px; background: #f8f9fa; }
    .log-entry-card { background: white; border: 1px solid #e0e0e0; border-radius: 6px; padding: 10px; margin-bottom: 8px; box-shadow: 0 1px 2px rgba(0,0,0,0.03); }
    .log-time { font-size: 0.75rem; color: #007bff; font-weight: bold; margin-bottom: 4px; display: block; }
    .log-content { font-size: 0.85rem; color: #333; line-height: 1.4; white-space: pre-wrap; }
    .log-add-section { padding: 10px; border-top: 1px solid #eee; background: #fff; }
    
    .contract-detail-container { max-width: 900px; margin: 15px auto; width: 95%; }
    .contract-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #0056b3; padding-bottom: 10px; margin-bottom: 15px; }
    .info-card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; }
    .info-card { background: white; border: 1px solid #e3e6f0; border-radius: 8px; padding: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.02); }
    .detail-row { display: flex; justify-content: space-between; margin-bottom: 8px; border-bottom: 1px dashed #f0f0f0; padding-bottom: 2px; }
    .detail-label { font-weight: 600; color: #777; font-size: 0.85rem; }
    .detail-value { font-weight: 500; color: #333; font-size: 0.95rem; text-align: right; }
    .highlight-value { color: #0056b3; font-weight: bold; font-size: 1rem; }
    
    .btn-link-customer { display: block; width: 100%; margin-top: 15px; padding: 10px; background-color: #007bff; color: white; text-align: center; border: none; border-radius: 6px; font-size: 0.95rem; font-weight: bold; cursor: pointer; }
    
    .back-link { display: inline-block; margin-bottom: 8px; color: #555; text-decoration: none; font-weight: bold; font-size: 0.85rem; }
    .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; display: flex; justify-content: center; align-items: center; }
    .modal-content { background: white; padding: 20px; border-radius: 8px; width: 90%; max-width: 400px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    /* ----------------------------------------------------------------- */
    /* 4. 모바일 반응형 스타일 */
    /* ----------------------------------------------------------------- */
    @media (max-width: 768px) {
      * { box-sizing: border-box; }
      html, body { overflow-x: hidden !important; width: 100%; position: relative; }
      body { padding: 0; margin: 0; background: #fff; }
      
      .container { 
        width: 100%; height: auto; min-height: 100vh; 
        border-radius: 0; box-shadow: none; overflow: visible; display: block;
      }
      .modern-tab { padding: 12px 0; font-size: 0.95rem; border-radius: 0; }
      .tab-container { margin: 0; border-radius: 0; position: sticky; top: 0; z-index: 10; border-bottom: 1px solid #eee; }

      .list-panel, .detail-panel { display: block; width: 100%; height: auto; }
      .list-left-pane, .list-right-pane, .detail-log-pane, .detail-info-pane { width: 100%; height: auto; border: none; display: block; }

      .list-left-pane { border-bottom: 8px solid #f0f2f5; }
      .filter-panel { padding: 15px; max-height: 250px; overflow-y: auto; }

      /* 리스트 카드형 변환 */
      .list-header-row { display: none; }
      
      #assignedCustomersList li, .contract-row {
        flex-wrap: wrap; padding: 12px; position: relative; align-items: flex-start; gap: 4px; border-bottom: 1px solid #eee;
      }

      /* 모바일 컬럼 배치 */
      .col-name { flex: 1 1 100%; font-size: 1rem; text-align: left; margin-bottom: 4px; order: 1; }
      .col-status { position: absolute; top: 12px; right: 12px; order: 2; }
      .col-phone { flex: 1 1 100%; text-align: left; color: #666; font-size: 0.85rem; order: 3; margin-bottom: 6px; }
      .col-memo { flex: 1 1 100%; text-align: left; padding: 0; white-space: normal; background: #f8f9fa; padding: 6px; border-radius: 4px; font-size: 0.8rem; order: 4; }
      
      /* 모바일에서 숨길 항목 */
      .col-db, .col-last, .col-date, .col-source,
      .col-cont-date, .col-cont-term, .col-cont-receipt, .col-cont-source, .col-cont-db { display: none; }
      
      /* 계약 리스트 모바일 전용 배치 */
      .col-cont-status { position: absolute; top: 12px; right: 12px; }
      .col-cont-cust { flex: 1 1 100%; font-size: 1rem; text-align: left; margin-bottom: 4px; color: #0056b3; }
      .col-cont-car { flex: 1 1 100%; text-align: left; font-size: 0.85rem; margin-bottom: 6px; }

      .detail-info-pane { padding: 10px; height: auto; }
      .detail-log-pane { flex: 1 0 auto; border-top: 8px solid #f0f2f5; height: auto; min-height: 400px; }
      
      .details-grid { grid-template-columns: 1fr; }
      .span-2, .span-3, .span-full { grid-column: span 1; }
      
      input, select, textarea, button { font-size: 16px; min-height: 40px; }
      
      .detail-info-pane > div:first-child { flex-wrap: wrap; gap: 8px; }
      .modal-content { width: 95%; max-height: 90vh; overflow-y: auto; }
      
      .detail-info-pane > div:first-child > div { flex-wrap: wrap !important; justify-content: flex-end; max-width: 100%; }
      .mini-header-row span, #contractList li span { font-size: 0.75rem; }
      .info-card-grid { grid-template-columns: 1fr !important; }
      .form-group label, .detail-label, .detail-value { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    }
</style>
